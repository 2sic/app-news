<link rel="stylesheet" href="@App.Path/dist/liststyles.css" />
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700" rel="stylesheet">
<script src="@App.Path/dist/script.js"></script>

@{
    var newsPage = @Dnn.Tab.FullUrl;
}
@if (!String.IsNullOrEmpty(App.Settings.NewsPage)) {
    newsPage = App.Settings.NewsPage;
}

<div class="app-news app-news-column-view sc-element">
    @Edit.Toolbar(actions: "new", contentType: "News", settings: new { hover = "left" })
    @Edit.Toolbar(ListContent)
    <div class="app-news-container">
        @foreach (var item in @AsDynamic(Data["Default"]))
        {
            var detailsLink =  Link.To(parameters: "detail=" + item.UrlKey);
            
            <div class="app-news-item" onclick="window.open('@detailsLink','_self');">
                <div class="sc-element">
                    @Edit.Toolbar(item)
                    @if (!String.IsNullOrEmpty(@item.Image))
                    {
                        <div>
                            <img src="@item.Image" alt />
                        </div>
                    }
                    else
                    {
                        <div>
                            <div class="app-news-imgplaceholder">
                               <img src="@App.Resources.PlaceholderMissingImage" alt />
                            </div>
                        </div>
                    }
                    <div>
                        <h2>@item.Title</h2>
                        <span class="app-news-date">@item.Date.ToString("dd.MM.yyyy")</span>
                        <span class="app-news-categories">
                        @if (@item.Categories.Count >  0)
                        {
                            @: |
                        } 
                        @foreach (var cat in  @item.Categories)
                        {
                            <span><a href="@(newsPage + "/sort/" + cat.UrlKey)">@cat.Name</a>&ensp;&ensp;&ensp;</span> 
                        }
                        </span>
                        <p>
                            @item.Teaser    
                        </p>

                        <a class="btn btn-primary" href="@detailsLink">@Html.Raw(App.Resources.LabelReadMore)</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>